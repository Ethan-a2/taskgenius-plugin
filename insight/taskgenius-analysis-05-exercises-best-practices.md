# Task Genius 入门路径、练习题目与最佳实践

日期：2026-01-22

## 入门路径

1. 环境准备
   - 安装 Node.js ≥ 18、pnpm ≥ 8、Obsidian ≥ 1.9
   - 克隆仓库并安装依赖：`pnpm install`
   - 运行开发模式：`pnpm run dev`，在 Obsidian 启用插件

2. 快速体验
   - 在 Vault 中创建一个 Markdown 文件，写入几条任务（- [ ] ...）
   - 打开 Tasks/Projects/Kanban 视图，观察解析与渲染
   - 使用任务状态循环与过滤器进行交互

3. 阅读代码
   - 从 `src/index.ts` 入口开始，理解视图注册与命令
   - 浏览 `widgets/`（views + renderers + core）与 `dataflow/`
   - 了解 `utils/` 的日期、过滤、分组工具

4. 运行与编写测试
   - 运行 `pnpm test`，查看 mocks 的使用
   - 为 TaskParser 或过滤工具添加一个单测

## 练习题目

1. 过滤器增强
   - 为 `task-filter-utils` 增加一个新的过滤条件（例如：按标签前缀过滤）
   - 编写单测验证组合过滤的正确性与性能

2. 分组策略优化
   - 在 `utils/grouping` 中增加基于日期区间的分组（例如：本周/下周）
   - 为分组结果添加排序与稳定性断言

3. 渲染器微优化
   - 在 `TasksWidgetRenderer` 中添加对长列表的简单虚拟化（只渲染可视窗口）
   - 对比渲染耗时（开发模式下使用 console.time）

4. 索引增量化
   - 为索引流程增加文件哈希缓存，避免未变更文件重解析
   - 在单测中模拟变更，断言解析次数的下降

5. CodeBlock 参数扩展
   - 在 `WidgetCodeBlockProcessor` 中支持一个新的参数（例如：默认排序字段）
   - 编写示例 Markdown 并验证渲染效果

## 最佳实践

- 代码结构
  - 保持模块单一职责，视图与渲染器解耦；工具方法可复用
  - 使用清晰的类型定义与接口（types/）

- 性能与内存
  - 优先增量索引与计算缓存；避免重复全量计算
  - 控制渲染频率：去抖/节流与按需更新

- 测试与质量
  - 针对解析与过滤编写充足单测；使用 mocks 隔离外部依赖
  - 在 CI 中加入基本性能阈值，防止显著退化

- 国际化
  - 通过脚本统一提取与生成翻译；避免硬编码文案

- 发布与迁移
  - 采用语义化版本与变更日志；为设置变更提供迁移路径

- 安全与隐私
  - 不在仓库中存放敏感信息；通过环境变量注入并在运行时解码
